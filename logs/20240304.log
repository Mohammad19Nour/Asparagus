04-03-2024 09:28:49.469 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:28:52.408 +04:00  INF  Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:28:52.438 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:28:52.459 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:28:52.493 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:28:52.779 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:28:52.790 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:28:52.795 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:28:52.800 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:28:52.807 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:28:52.814 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:28:52.823 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:28:52.829 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:28:52.835 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:28:52.842 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:28:52.846 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:28:52.852 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:28:52.856 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:28:52.860 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:28:52.864 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:28:52.870 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:28:52.876 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:28:52.880 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:28:52.890 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:28:52.899 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:28:52.904 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:28:52.909 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:28:52.916 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:28:52.927 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:28:53.010 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:28:53.167 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:28:53.502 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:28:53.502 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:28:53.504 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:28:53.505 +04:00  INF  Hosting environment: Development
04-03-2024 09:28:53.505 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:28:53.746 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 09:28:53.810 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:28:54.040 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 297.0507ms
04-03-2024 09:28:54.120 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:28:54.212 +04:00  INF  Executed DbCommand (5ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:28:54.222 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 09:28:54.737 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 514.6392ms
04-03-2024 09:29:17.126 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:29:17.135 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:29:17.232 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:29:17.251 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 09:29:17.268 +04:00  INF  Executing action method AsparagusN.Controllers.BasketController.GetBasketForUser (API) - Validation state: "Valid"
04-03-2024 09:29:17.275 +04:00  INF  Exception happened at basket controller
04-03-2024 09:29:17.275 +04:00  ERR  An error occurred:  e.MessageSystem.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at AsparagusN.Extensions.ClaimsPrincipalExtensions.GetEmail(ClaimsPrincipal user) in C:\Users\Mohammad\RiderProjects\AsparagusN\API\Extensions\ClaimsPrincipalExtensions.cs:line 9
   at AsparagusN.Controllers.BasketController._getUser() in C:\Users\Mohammad\RiderProjects\AsparagusN\API\Controllers\BasketController.cs:line 168
   at AsparagusN.Controllers.BasketController.GetBasketForUser() in C:\Users\Mohammad\RiderProjects\AsparagusN\API\Controllers\BasketController.cs:line 40

04-03-2024 09:29:17.292 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 34.4651ms
04-03-2024 09:29:17.293 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:29:17.294 +04:00  ERR  Sequence contains no matching element
04-03-2024 09:29:17.309 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - application/json 183.4089ms
04-03-2024 09:30:18.894 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:30:18.895 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:30:18.901 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 09:30:18.924 +04:00  INF  Executing action method AsparagusN.Controllers.BasketController.GetBasketForUser (API) - Validation state: "Valid"
04-03-2024 09:30:18.936 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 34.7366ms
04-03-2024 09:30:18.963 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:30:18.964 +04:00  ERR  Sequence contains no matching element
04-03-2024 09:30:18.969 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - application/json 74.6885ms
04-03-2024 09:31:00.054 +04:00  INF  Application is shutting down...
04-03-2024 09:37:36.929 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:37:39.830 +04:00  INF  Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:37:39.849 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:37:39.867 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:37:39.909 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:37:40.220 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:37:40.229 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:37:40.233 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:37:40.237 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:37:40.242 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:37:40.248 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:37:40.252 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:37:40.257 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:37:40.263 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:37:40.269 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:37:40.273 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:37:40.279 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:37:40.283 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:37:40.287 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:37:40.291 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:37:40.295 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:37:40.301 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:37:40.305 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:37:40.310 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:37:40.315 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:37:40.318 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:37:40.322 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:37:40.328 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:37:40.334 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:37:40.386 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:37:40.547 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:37:40.821 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:37:40.821 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:37:40.823 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:37:40.824 +04:00  INF  Hosting environment: Development
04-03-2024 09:37:40.824 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:37:40.964 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 09:37:41.128 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:37:41.233 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 272.2741ms
04-03-2024 09:37:41.418 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:37:41.430 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 09:37:41.534 +04:00  INF  Executed DbCommand (9ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:37:41.982 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 551.7474ms
04-03-2024 09:37:45.373 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:37:45.384 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:37:45.520 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:37:45.550 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 09:37:45.582 +04:00  INF  Executing action method AsparagusN.Controllers.BasketController.GetBasketForUser (API) - Validation state: "Valid"
04-03-2024 09:37:45.607 +04:00  INF  Executed action method AsparagusN.Controllers.BasketController.GetBasketForUser (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.3037ms.
04-03-2024 09:37:45.628 +04:00  INF  Executing ObjectResult, writing value of type 'System.String'.
04-03-2024 09:37:45.646 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 82.3318ms
04-03-2024 09:37:45.647 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:37:45.652 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - text/plain;+charset=utf-8 279.8739ms
04-03-2024 09:38:39.473 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:38:39.475 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:38:39.482 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 09:38:39.498 +04:00  INF  Executing action method AsparagusN.Controllers.BasketController.GetBasketForUser (API) - Validation state: "Valid"
04-03-2024 09:38:39.506 +04:00  INF  Executed action method AsparagusN.Controllers.BasketController.GetBasketForUser (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 7.6284ms.
04-03-2024 09:38:39.512 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:38:39.701 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 217.9854ms
04-03-2024 09:38:39.701 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 09:38:39.701 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 86 application/json;+charset=utf-8 227.6385ms
04-03-2024 09:41:30.585 +04:00  INF  Application is shutting down...
04-03-2024 09:42:20.884 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:42:24.072 +04:00  INF  Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:42:24.100 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:42:24.120 +04:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:42:24.156 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:42:24.534 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:42:24.551 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:42:24.557 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:42:24.563 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:42:24.572 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:42:24.582 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:42:24.598 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:42:24.606 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:42:24.613 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:42:24.631 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:42:24.646 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:42:24.656 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:42:24.664 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:42:24.670 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:42:24.676 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:42:24.685 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:42:24.692 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:42:24.702 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:42:24.709 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:42:24.722 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:42:24.731 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:42:24.736 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:42:24.740 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:42:24.748 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:42:24.840 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:42:25.149 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:42:25.605 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:42:25.605 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:42:25.612 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:42:25.612 +04:00  INF  Hosting environment: Development
04-03-2024 09:42:25.612 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:42:25.916 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 09:42:26.040 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:42:26.326 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 412.7679ms
04-03-2024 09:42:26.391 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:42:26.759 +04:00  INF  Executed DbCommand (70ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:42:26.824 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 09:42:27.783 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 958.6925ms
04-03-2024 09:42:56.793 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 58
04-03-2024 09:42:56.804 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:42:56.874 +04:00  INF  CORS policy execution successful.
04-03-2024 09:42:56.881 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:42:56.919 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:42:57.110 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:42:57.200 +04:00  INF  Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:42:57.221 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:42:57.240 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:42:57.465 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:42:57.494 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."AllowLoyal", "c"."AllowOrder", "c"."BranchId", "c"."Email", "c"."IsActive", "c"."Name", "c"."Password", "c"."Period", "c"."PhoneNumber", "c"."PictureUrl", "b"."Id", "b"."AddressId", "b"."NameAR", "b"."NameEN"
FROM "Cashiers" AS "c"
INNER JOIN "Branches" AS "b" ON "c"."BranchId" = "b"."Id"
WHERE "c"."Email" = @__email_0
LIMIT 1
04-03-2024 09:42:57.511 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 584.9297ms
04-03-2024 09:42:57.513 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:42:57.513 +04:00  ERR  Object reference not set to an instance of an object.
04-03-2024 09:42:57.563 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 58 - 500 - application/json 769.5408ms
04-03-2024 09:43:11.307 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 62
04-03-2024 09:43:11.322 +04:00  INF  CORS policy execution successful.
04-03-2024 09:43:11.323 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:43:11.324 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:43:11.353 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:43:11.360 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:43:11.361 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:43:11.363 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:43:11.472 +04:00  INF  Executed action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.6014ms.
04-03-2024 09:43:11.485 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:43:11.577 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 253.4507ms
04-03-2024 09:43:11.577 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:43:11.578 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 62 - 200 107 application/json;+charset=utf-8 270.6895ms
04-03-2024 09:43:35.012 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 61
04-03-2024 09:43:35.014 +04:00  INF  CORS policy execution successful.
04-03-2024 09:43:35.014 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:43:35.015 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:43:35.025 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:43:35.028 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:43:35.029 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:43:35.032 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:43:35.142 +04:00  INF  Executed action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 116.6965ms.
04-03-2024 09:43:35.144 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:43:35.146 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 131.402ms
04-03-2024 09:43:35.146 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:43:35.146 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 61 - 200 107 application/json;+charset=utf-8 133.9060ms
04-03-2024 09:44:01.862 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 61
04-03-2024 09:44:01.863 +04:00  INF  CORS policy execution successful.
04-03-2024 09:44:01.863 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:44:01.863 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:44:01.864 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:44:01.865 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:44:01.866 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:44:01.868 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:44:01.971 +04:00  INF  Executed action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 107.1677ms.
04-03-2024 09:44:01.971 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:44:01.972 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 109.0048ms
04-03-2024 09:44:01.972 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:44:01.973 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 61 - 200 107 application/json;+charset=utf-8 110.6513ms
04-03-2024 09:44:38.831 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminCashiers/add multipart/form-data;+boundary=----WebKitFormBoundaryosDmhKrGxI6T78NV 81780
04-03-2024 09:44:38.831 +04:00  INF  CORS policy execution successful.
04-03-2024 09:44:38.831 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminCashiersController.AddCashier (API)'
04-03-2024 09:44:38.844 +04:00  INF  Route matched with {action = "AddCashier", controller = "AdminCashiers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.CashierDtos.AdminCashierDto]] AddCashier(AsparagusN.DTOs.CashierDtos.NewCashierDto) on controller AsparagusN.Controllers.Dashboard.AdminCashiersController (API).
04-03-2024 09:44:38.941 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminCashiersController.AddCashier (API) - Validation state: "Valid"
04-03-2024 09:44:38.977 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."AddressId", "b"."NameAR", "b"."NameEN"
FROM "Branches" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
04-03-2024 09:44:39.140 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
04-03-2024 09:44:39.366 +04:00  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = Double), @p4='?' (DbType = Double), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Address" ("ApartmentNumber", "BuildingName", "City", "Latitude", "Longitude", "StreetName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
04-03-2024 09:44:39.386 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?', @p3='?' (DbType = Double), @p4='?' (DbType = Double), @p5='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Address" ("ApartmentNumber", "BuildingName", "City", "Latitude", "Longitude", "StreetName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
04-03-2024 09:44:39.398 +04:00  INF  Executed DbCommand (3ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = DateTime), @p8='?' (Size = 36), @p9='?' (Size = 8), @p10='?' (DbType = Boolean), @p11='?', @p12='?' (Size = 4), @p13='?' (DbType = Int32), @p14='?' (DbType = Boolean), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (DbType = Int32), @p19='?', @p20='?' (Size = 8), @p21='?' (Size = 84), @p22='?', @p23='?' (DbType = Boolean), @p24='?', @p25='?' (DbType = DateTime), @p26='?' (Size = 32), @p27='?' (DbType = Boolean), @p28='?' (Size = 8), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("AccessFailedCount", "Birthday", "ConcurrencyStamp", "Email", "EmailConfirmed", "FullName", "Gender", "HomeAddressId", "IsMealPlanMember", "IsNormalUser", "LockoutEnabled", "LockoutEnd", "LoyaltyPoints", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "PictureUrl", "RegistrationDate", "SecurityStamp", "TwoFactorEnabled", "UserName", "WorkAddressId")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "Id";
04-03-2024 09:44:39.426 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:44:39.427 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:44:39.431 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:44:39.441 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
04-03-2024 09:44:39.476 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUserRoles" ("RoleId", "UserId")
VALUES (@p0, @p1);
04-03-2024 09:44:39.482 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@p24='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (Size = 36), @p25='?' (Size = 36), @p3='?' (Size = 8), @p4='?' (DbType = Boolean), @p5='?', @p6='?' (Size = 4), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (DbType = Int32), @p13='?', @p14='?' (Size = 8), @p15='?' (Size = 84), @p16='?', @p17='?' (DbType = Boolean), @p18='?', @p19='?' (DbType = DateTime), @p20='?' (Size = 32), @p21='?' (DbType = Boolean), @p22='?' (Size = 8), @p23='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Birthday" = @p1, "ConcurrencyStamp" = @p2, "Email" = @p3, "EmailConfirmed" = @p4, "FullName" = @p5, "Gender" = @p6, "HomeAddressId" = @p7, "IsMealPlanMember" = @p8, "IsNormalUser" = @p9, "LockoutEnabled" = @p10, "LockoutEnd" = @p11, "LoyaltyPoints" = @p12, "NormalizedEmail" = @p13, "NormalizedUserName" = @p14, "PasswordHash" = @p15, "PhoneNumber" = @p16, "PhoneNumberConfirmed" = @p17, "PictureUrl" = @p18, "RegistrationDate" = @p19, "SecurityStamp" = @p20, "TwoFactorEnabled" = @p21, "UserName" = @p22, "WorkAddressId" = @p23
WHERE "Id" = @p24 AND "ConcurrencyStamp" = @p25
RETURNING 1;
04-03-2024 09:44:39.536 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 8), @p4='?' (DbType = Boolean), @p5='?' (Size = 3), @p6='?' (Size = 6), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?' (Size = 65)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cashiers" ("AllowLoyal", "AllowOrder", "BranchId", "Email", "IsActive", "Name", "Password", "Period", "PhoneNumber", "PictureUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";
04-03-2024 09:44:39.593 +04:00  INF  Executed action method AsparagusN.Controllers.Dashboard.AdminCashiersController.AddCashier (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 651.6625ms.
04-03-2024 09:44:39.595 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiOkResponse`1[[AsparagusN.DTOs.CashierDtos.AdminCashierDto, API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
04-03-2024 09:44:39.624 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminCashiersController.AddCashier (API) in 779.666ms
04-03-2024 09:44:39.625 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminCashiersController.AddCashier (API)'
04-03-2024 09:44:39.632 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminCashiers/add multipart/form-data;+boundary=----WebKitFormBoundaryosDmhKrGxI6T78NV 81780 - 200 414 application/json;+charset=utf-8 801.5820ms
04-03-2024 09:44:49.304 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49
04-03-2024 09:44:49.304 +04:00  INF  CORS policy execution successful.
04-03-2024 09:44:49.304 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:44:49.304 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:44:49.305 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:44:49.306 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:44:49.307 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:44:49.310 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:44:49.463 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:44:49.479 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId", "z"."Id", "z"."NameAR", "z"."NameEN"
FROM "Drivers" AS "d"
INNER JOIN "Zones" AS "z" ON "d"."ZoneId" = "z"."Id"
WHERE lower("d"."Email") = @__email_0
LIMIT 1
04-03-2024 09:44:49.479 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 174.7ms
04-03-2024 09:44:49.479 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:44:49.479 +04:00  ERR  Object reference not set to an instance of an object.
04-03-2024 09:44:49.480 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49 - 500 - application/json 176.2238ms
04-03-2024 09:46:16.946 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49
04-03-2024 09:46:16.946 +04:00  INF  CORS policy execution successful.
04-03-2024 09:46:16.946 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:46:16.955 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:46:16.958 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:46:16.959 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__loginDto_Email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:46:16.960 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:46:16.963 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:46:17.113 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:46:17.114 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId", "z"."Id", "z"."NameAR", "z"."NameEN"
FROM "Drivers" AS "d"
INNER JOIN "Zones" AS "z" ON "d"."ZoneId" = "z"."Id"
WHERE lower("d"."Email") = @__email_0
LIMIT 1
04-03-2024 09:46:17.115 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 160.1565ms
04-03-2024 09:46:17.116 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:46:17.118 +04:00  ERR  Object reference not set to an instance of an object.
04-03-2024 09:46:17.120 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49 - 500 - application/json 174.8430ms
04-03-2024 09:47:18.883 +04:00  INF  Application is shutting down...
04-03-2024 09:47:59.746 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:48:03.855 +04:00  INF  Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:48:03.876 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:48:03.897 +04:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:48:03.927 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:48:04.639 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:48:04.665 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:48:04.689 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:48:04.696 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:48:04.707 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:48:04.717 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:48:04.723 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:48:04.731 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:48:04.737 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:48:04.763 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:48:04.768 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:48:04.773 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:48:04.780 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:48:04.785 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:48:04.791 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:48:04.798 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:48:04.807 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:48:04.814 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:48:04.822 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:48:04.830 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:48:04.835 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:48:04.840 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:48:04.845 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:48:04.854 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:48:04.931 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:48:05.088 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:48:05.481 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:48:05.481 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:48:05.485 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:48:05.485 +04:00  INF  Hosting environment: Development
04-03-2024 09:48:05.485 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:48:05.838 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49
04-03-2024 09:48:06.082 +04:00  INF  Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:48:06.246 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:48:06.332 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:48:06.376 +04:00  INF  CORS policy execution successful.
04-03-2024 09:48:06.385 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:48:06.409 +04:00  INF  Executed DbCommand (4ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:48:06.416 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:48:06.564 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:48:29.167 +04:00  INF  Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:48:32.965 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:48:32.979 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:48:40.867 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:49:22.994 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:49:25.516 +04:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:49:25.535 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:49:25.551 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:49:25.577 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:49:25.839 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:49:25.850 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:49:25.855 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:49:25.862 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:49:25.868 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:49:25.876 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:49:25.883 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:49:25.889 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:49:25.896 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:49:25.909 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:49:25.914 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:49:25.919 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:49:25.927 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:49:25.932 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:49:25.936 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:49:25.941 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:49:25.949 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:49:25.956 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:49:25.963 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:49:25.970 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:49:25.975 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:49:25.978 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:49:25.982 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:49:25.989 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:49:26.039 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:49:26.168 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:49:26.423 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:49:26.423 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:49:26.433 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:49:26.433 +04:00  INF  Hosting environment: Development
04-03-2024 09:49:26.433 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:49:26.524 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 09:49:26.729 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:49:26.771 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 250.0681ms
04-03-2024 09:49:27.050 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:49:27.068 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 09:49:27.172 +04:00  INF  Executed DbCommand (7ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:49:27.630 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 561.7985ms
04-03-2024 09:49:29.632 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49
04-03-2024 09:49:29.645 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:49:29.705 +04:00  INF  CORS policy execution successful.
04-03-2024 09:49:29.712 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:49:29.745 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:49:29.937 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:49:30.092 +04:00  INF  Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:49:30.115 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:49:30.139 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:49:30.345 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:49:30.366 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."AllowLoyal", "c"."AllowOrder", "c"."BranchId", "c"."Email", "c"."IsActive", "c"."Name", "c"."Password", "c"."Period", "c"."PhoneNumber", "c"."PictureUrl", "b"."Id", "b"."AddressId", "b"."NameAR", "b"."NameEN"
FROM "Cashiers" AS "c"
INNER JOIN "Branches" AS "b" ON "c"."BranchId" = "b"."Id"
WHERE "c"."Email" = @__email_0
LIMIT 1
04-03-2024 09:49:30.430 +04:00  INF  Executed action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 483.5548ms.
04-03-2024 09:49:30.438 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:49:30.522 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 768.7973ms
04-03-2024 09:49:30.522 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:49:30.530 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49 - 200 74 application/json;+charset=utf-8 897.0936ms
04-03-2024 09:49:40.293 +04:00  INF  Application is shutting down...
04-03-2024 09:49:53.064 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:49:56.678 +04:00  INF  Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:49:56.698 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:49:56.717 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:49:56.749 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:49:57.134 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:49:57.143 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:49:57.148 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:49:57.153 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:49:57.160 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:49:57.169 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:49:57.174 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:49:57.179 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:49:57.183 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:49:57.191 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:49:57.197 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:49:57.201 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:49:57.206 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:49:57.211 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:49:57.216 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:49:57.221 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:49:57.229 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:49:57.234 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:49:57.239 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:49:57.245 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:49:57.248 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:49:57.253 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:49:57.257 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:49:57.263 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:49:57.310 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:49:57.460 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:50:55.926 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:50:58.572 +04:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:50:58.590 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:50:58.606 +04:00  INF  Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:50:58.634 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:50:58.973 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:50:58.981 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:50:58.986 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:50:58.991 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:50:58.996 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:50:59.001 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:50:59.006 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:50:59.010 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:50:59.014 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:50:59.022 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:50:59.026 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:50:59.030 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:50:59.034 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:50:59.039 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:50:59.042 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:50:59.047 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:50:59.052 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:50:59.058 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:50:59.062 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:50:59.068 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:50:59.072 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:50:59.075 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:50:59.080 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:50:59.086 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:50:59.137 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:50:59.289 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:50:59.576 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:50:59.576 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:50:59.578 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:50:59.578 +04:00  INF  Hosting environment: Development
04-03-2024 09:50:59.578 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:50:59.681 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 09:50:59.886 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:50:59.945 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 267.0038ms
04-03-2024 09:51:00.125 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 09:51:00.211 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:51:00.299 +04:00  INF  Executed DbCommand (5ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:51:00.760 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 634.5218ms
04-03-2024 09:51:08.662 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49
04-03-2024 09:51:08.677 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:51:08.767 +04:00  INF  CORS policy execution successful.
04-03-2024 09:51:08.773 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:51:08.809 +04:00  INF  Route matched with {action = "Login", controller = "AdminAccounts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AdminAccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.Dashboard.AdminAccountsController (API).
04-03-2024 09:51:09.011 +04:00  INF  Executing action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) - Validation state: "Valid"
04-03-2024 09:51:09.115 +04:00  INF  Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:51:09.133 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:51:09.157 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:51:09.424 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:51:09.445 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."AllowLoyal", "c"."AllowOrder", "c"."BranchId", "c"."Email", "c"."IsActive", "c"."Name", "c"."Password", "c"."Period", "c"."PhoneNumber", "c"."PictureUrl", "b"."Id", "b"."AddressId", "b"."NameAR", "b"."NameEN"
FROM "Cashiers" AS "c"
INNER JOIN "Branches" AS "b" ON "c"."BranchId" = "b"."Id"
WHERE "c"."Email" = @__email_0
LIMIT 1
04-03-2024 09:51:09.516 +04:00  INF  Executed action method AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 498.9041ms.
04-03-2024 09:51:09.528 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiOkResponse`1[[AsparagusN.DTOs.AdminAccountDto, API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
04-03-2024 09:51:09.615 +04:00  INF  Executed action AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API) in 799.0648ms
04-03-2024 09:51:09.615 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.Dashboard.AdminAccountsController.Login (API)'
04-03-2024 09:51:09.622 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/AdminAccounts/login application/json-patch+json 49 - 200 464 application/json;+charset=utf-8 959.3909ms
04-03-2024 09:51:37.317 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:51:37.407 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__email_0
LIMIT 1
04-03-2024 09:51:37.411 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:51:37.427 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 09:51:37.432 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 09:51:37.441 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:51:37.445 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 09:51:37.447 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 09:51:37.447 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.4392ms.
04-03-2024 09:51:37.448 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:51:37.455 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 9.7143ms
04-03-2024 09:51:37.455 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:51:37.463 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 145.7013ms
04-03-2024 09:56:49.425 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:56:49.430 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__email_0
LIMIT 1
04-03-2024 09:56:49.431 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:56:49.435 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 09:56:49.435 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 09:56:49.436 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:56:49.438 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 09:56:49.438 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 09:56:49.440 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.1949ms.
04-03-2024 09:56:49.440 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:56:49.440 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 2.2292ms
04-03-2024 09:56:49.440 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:56:49.441 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 71 application/json;+charset=utf-8 16.1934ms
04-03-2024 09:56:50.848 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:56:50.849 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__email_0
LIMIT 1
04-03-2024 09:56:50.850 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:56:50.860 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 09:56:50.860 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 09:56:50.861 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:56:50.861 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 09:56:50.861 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 09:56:50.861 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0066ms.
04-03-2024 09:56:50.861 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:56:50.862 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 0.4535ms
04-03-2024 09:56:50.862 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:56:50.862 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 71 application/json;+charset=utf-8 13.9307ms
04-03-2024 09:57:01.062 +04:00  INF  Application is shutting down...
04-03-2024 09:57:35.189 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 09:57:37.594 +04:00  INF  Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:57:37.612 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 09:57:37.629 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 09:57:37.655 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 09:57:37.937 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 09:57:37.946 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 09:57:37.951 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 09:57:37.956 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 09:57:37.961 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 09:57:37.967 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 09:57:37.973 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 09:57:37.978 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 09:57:37.982 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 09:57:37.991 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 09:57:37.995 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 09:57:37.999 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 09:57:38.004 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 09:57:38.008 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 09:57:38.012 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 09:57:38.017 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 09:57:38.023 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 09:57:38.028 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 09:57:38.033 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 09:57:38.040 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 09:57:38.044 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 09:57:38.048 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 09:57:38.053 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 09:57:38.060 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 09:57:38.113 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 09:57:38.314 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 09:57:38.637 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 09:57:38.638 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 09:57:38.640 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 09:57:38.640 +04:00  INF  Hosting environment: Development
04-03-2024 09:57:38.640 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 09:57:38.750 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 09:57:38.937 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 09:57:39.040 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 292.4739ms
04-03-2024 09:57:39.215 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 09:57:39.258 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 09:57:39.315 +04:00  INF  Executed DbCommand (6ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 09:57:39.858 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 599.7335ms
04-03-2024 09:57:53.643 +04:00  INF  Request starting HTTP/1.1 POST http://localhost:5257/api/Account/login application/json-patch+json 46
04-03-2024 09:57:53.654 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 09:57:53.742 +04:00  INF  CORS policy execution successful.
04-03-2024 09:57:53.747 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.User.AccountController.Login (API)'
04-03-2024 09:57:53.788 +04:00  INF  Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.AccountDtos.AccountDto]] Login(AsparagusN.DTOs.AccountDtos.LoginDto) on controller AsparagusN.Controllers.User.AccountController (API).
04-03-2024 09:57:53.982 +04:00  INF  Executing action method AsparagusN.Controllers.User.AccountController.Login (API) - Validation state: "Valid"
04-03-2024 09:57:54.135 +04:00  INF  Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a0"."Id", "a0"."ApartmentNumber", "a0"."BuildingName", "a0"."City", "a0"."Latitude", "a0"."Longitude", "a0"."StreetName", "a1"."Id", "a1"."ApartmentNumber", "a1"."BuildingName", "a1"."City", "a1"."Latitude", "a1"."Longitude", "a1"."StreetName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a0" ON "a"."HomeAddressId" = "a0"."Id"
INNER JOIN "Address" AS "a1" ON "a"."WorkAddressId" = "a1"."Id"
WHERE "a"."Email" = @__loginDto_Email_0
LIMIT 1
04-03-2024 09:57:54.157 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
04-03-2024 09:57:54.185 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1
04-03-2024 09:57:54.382 +04:00  INF  Executed action method AsparagusN.Controllers.User.AccountController.Login (API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 393.4285ms.
04-03-2024 09:57:54.392 +04:00  INF  Executing OkObjectResult, writing value of type 'AsparagusN.Errors.ApiOkResponse`1[[AsparagusN.DTOs.AccountDtos.AccountDto, API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
04-03-2024 09:57:54.545 +04:00  INF  Executed action AsparagusN.Controllers.User.AccountController.Login (API) in 746.7073ms
04-03-2024 09:57:54.545 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.User.AccountController.Login (API)'
04-03-2024 09:57:54.557 +04:00  INF  Request finished HTTP/1.1 POST http://localhost:5257/api/Account/login application/json-patch+json 46 - 200 740 application/json;+charset=utf-8 914.2626ms
04-03-2024 09:58:10.397 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 09:58:10.523 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE "a"."Email" = @__email_0
LIMIT 1
04-03-2024 09:58:10.537 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 09:58:10.551 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 09:58:10.554 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 09:58:10.559 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:58:10.562 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 09:58:10.564 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 09:58:10.564 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.3364ms.
04-03-2024 09:58:10.565 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 09:58:10.571 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 9.3353ms
04-03-2024 09:58:10.571 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 09:58:10.578 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 180.9362ms
04-03-2024 10:00:50.167 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:00:50.182 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:00:50.189 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:00:50.199 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 10:00:50.202 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 10:00:50.204 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:00:50.206 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 10:00:50.207 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 10:00:50.207 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0098ms.
04-03-2024 10:00:50.207 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 10:00:50.207 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 1.2087ms
04-03-2024 10:00:50.207 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:00:50.208 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 41.2184ms
04-03-2024 10:01:03.171 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:01:03.177 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:01:03.177 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:01:03.180 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 10:01:03.180 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 10:01:03.180 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:01:03.182 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 10:01:03.182 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 10:01:03.182 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0063ms.
04-03-2024 10:01:03.182 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 10:01:03.182 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 0.5236ms
04-03-2024 10:01:03.182 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:01:03.182 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 11.3959ms
04-03-2024 10:01:35.998 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:01:36.002 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:01:36.003 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:01:36.004 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 10:01:36.004 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 10:01:36.005 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:01:36.006 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 10:01:36.006 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 10:01:36.006 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.006ms.
04-03-2024 10:01:36.006 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 10:01:36.007 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 0.7403ms
04-03-2024 10:01:36.007 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:01:36.007 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 9.3727ms
04-03-2024 10:02:06.175 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:02:06.178 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:02:06.179 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:02:06.189 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 10:02:06.189 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 10:02:06.190 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:02:06.190 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 10:02:06.191 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 10:02:06.191 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0228ms.
04-03-2024 10:02:06.191 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 10:02:06.191 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 0.6279ms
04-03-2024 10:02:06.191 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:02:06.192 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 17.0144ms
04-03-2024 10:06:57.341 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:06:57.347 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:06:57.349 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:06:57.350 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 10:06:57.350 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 10:06:57.350 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:06:57.352 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 10:06:57.352 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 10:06:57.352 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 0.0116ms.
04-03-2024 10:06:57.353 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 10:06:57.353 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 0.8762ms
04-03-2024 10:06:57.353 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:06:57.353 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 12.3874ms
04-03-2024 10:07:07.555 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:07:07.558 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:07:07.559 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:07:07.590 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:07:07.595 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 10:07:07.597 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 1.2567ms
04-03-2024 10:07:07.597 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:07:07.598 +04:00  ERR  Unable to resolve service for type 'AutoMapper.Mapper' while attempting to activate 'AsparagusN.Controllers.BasketController'.
04-03-2024 10:07:07.631 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - application/json 76.2550ms
04-03-2024 10:07:18.687 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:07:18.690 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:07:18.691 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:07:18.692 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:07:18.692 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 10:07:18.693 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 0.3187ms
04-03-2024 10:07:18.693 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:07:18.693 +04:00  ERR  Unable to resolve service for type 'AutoMapper.Mapper' while attempting to activate 'AsparagusN.Controllers.BasketController'.
04-03-2024 10:07:18.694 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - application/json 6.4693ms
04-03-2024 10:08:44.252 +04:00  INF  Application is shutting down...
04-03-2024 10:09:01.737 +04:00  INF  User profile is available. Using 'C:\Users\Mohammad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
04-03-2024 10:09:04.407 +04:00  INF  Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 10:09:04.431 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
04-03-2024 10:09:04.451 +04:00  INF  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
04-03-2024 10:09:04.479 +04:00  INF  No migrations were applied. The database is already up to date.
04-03-2024 10:09:04.795 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetRoles" AS "a")
04-03-2024 10:09:04.804 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminPlans" AS "a")
04-03-2024 10:09:04.808 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Allergies" AS "a")
04-03-2024 10:09:04.812 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Categories" AS "c")
04-03-2024 10:09:04.817 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Branches" AS "b")
04-03-2024 10:09:04.823 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Ingredients" AS "i")
04-03-2024 10:09:04.828 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drinks" AS "d")
04-03-2024 10:09:04.832 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ExtraOptions" AS "e")
04-03-2024 10:09:04.836 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Zones" AS "z")
04-03-2024 10:09:04.843 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Meals" AS "m")
04-03-2024 10:09:04.847 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedDrinks" AS "a")
04-03-2024 10:09:04.851 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedExtraOptions" AS "a")
04-03-2024 10:09:04.855 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedMeals" AS "a")
04-03-2024 10:09:04.859 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedSnacks" AS "a")
04-03-2024 10:09:04.863 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "PlanTypes" AS "p")
04-03-2024 10:09:04.866 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AdminSelectedCarbs" AS "a")
04-03-2024 10:09:04.873 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "AspNetUsers" AS "a")
04-03-2024 10:09:04.877 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Drivers" AS "d")
04-03-2024 10:09:04.882 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cashiers" AS "c")
04-03-2024 10:09:04.888 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o")
04-03-2024 10:09:04.892 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "GiftSelections" AS "g")
04-03-2024 10:09:04.896 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cars" AS "c")
04-03-2024 10:09:04.900 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Bundles" AS "b")
04-03-2024 10:09:04.907 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserPlans" AS "u")
04-03-2024 10:09:04.957 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "d"."Id", "d"."Email", "d"."IsActive", "d"."Name", "d"."Password", "d"."Period", "d"."PhoneNumber", "d"."PictureUrl", "d"."RegistrationDate", "d"."Status", "d"."ZoneId"
FROM "Drivers" AS "d"
04-03-2024 10:09:05.104 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Day", "u"."DayOrderStatus", "u"."DeliveryLocationId", "u"."DeliveryPeriod", "u"."DriverId", "u"."IsCustomerInfoPrinted", "u"."IsHomeAddress", "u"."IsMealsInfoPrinted", "u"."Priority", "u"."UserPlanId"
FROM "UserPlanDays" AS "u"
04-03-2024 10:09:05.365 +04:00  INF  Now listening on: http://localhost:5257
04-03-2024 10:09:05.365 +04:00  INF  Now listening on: http://[::]:5257
04-03-2024 10:09:05.366 +04:00  INF  Application started. Press Ctrl+C to shut down.
04-03-2024 10:09:05.367 +04:00  INF  Hosting environment: Development
04-03-2024 10:09:05.367 +04:00  INF  Content root path: C:\Users\Mohammad\RiderProjects\AsparagusN\API
04-03-2024 10:09:05.726 +04:00  INF  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId", "a3"."Id", "a3"."ApartmentNumber", "a3"."BuildingName", "a3"."City", "a3"."Latitude", "a3"."Longitude", "a3"."StreetName", "a4"."Id", "a4"."ApartmentNumber", "a4"."BuildingName", "a4"."City", "a4"."Latitude", "a4"."Longitude", "a4"."StreetName", "t"."UserId", "t"."RoleId", "t"."Id", "t"."ConcurrencyStamp", "t"."Name", "t"."NormalizedName"
FROM "AspNetUsers" AS "a"
INNER JOIN "Address" AS "a3" ON "a"."HomeAddressId" = "a3"."Id"
INNER JOIN "Address" AS "a4" ON "a"."WorkAddressId" = "a4"."Id"
LEFT JOIN (
    SELECT "a5"."UserId", "a5"."RoleId", "a6"."Id", "a6"."ConcurrencyStamp", "a6"."Name", "a6"."NormalizedName"
    FROM "AspNetUserRoles" AS "a5"
    INNER JOIN "AspNetRoles" AS "a6" ON "a5"."RoleId" = "a6"."Id"
) AS "t" ON "a"."Id" = "t"."UserId"
WHERE (
    SELECT COUNT(*)
    FROM "AspNetUserRoles" AS "a0"
    WHERE "a"."Id" = "a0"."UserId") = 1 AND lower((
    SELECT "a2"."Name"
    FROM "AspNetUserRoles" AS "a1"
    INNER JOIN "AspNetRoles" AS "a2" ON "a1"."RoleId" = "a2"."Id"
    WHERE "a"."Id" = "a1"."UserId"
    LIMIT 1)) = 'user'
ORDER BY "a"."Id", "a3"."Id", "a4"."Id", "t"."UserId", "t"."RoleId"
04-03-2024 10:09:05.878 +04:00  INF  Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "g"."Id", "g"."MealId", "g"."Month", "g"."MonthName"
FROM "GiftSelections" AS "g"
04-03-2024 10:09:05.934 +04:00  INF  Executed DbCommand (4ms) [Parameters=[@__currentMonth_0='?' (DbType = Int32), @__currentDay_1='?' (DbType = Int32), @__currentYear_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."BuyerId"
FROM "Orders" AS "o"
WHERE "o"."PaymentType" = 'Gift' AND CAST(strftime('%m', "o"."OrderDate") AS INTEGER) = @__currentMonth_0 AND CAST(strftime('%d', "o"."OrderDate", 'start of day') AS INTEGER) = @__currentDay_1 AND CAST(strftime('%Y', "o"."OrderDate") AS INTEGER) = @__currentYear_2
04-03-2024 10:09:06.513 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/index.html - -
04-03-2024 10:09:06.776 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/index.html - - - 200 - text/html;charset=utf-8 265.1195ms
04-03-2024 10:09:06.928 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - -
04-03-2024 10:09:07.473 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 545.6174ms
04-03-2024 10:09:11.347 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:09:11.634 +04:00  INF  Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:09:11.651 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:09:11.659 +04:00  WRN  Failed to determine the https port for redirect.
04-03-2024 10:09:11.731 +04:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
04-03-2024 10:09:11.736 +04:00  INF  AuthenticationScheme: Bearer was forbidden.
04-03-2024 10:09:11.743 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:09:11.773 +04:00  INF  Route matched with {action = "Error", controller = "Error"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error(Int32) on controller AsparagusN.Controllers.ErrorController (API).
04-03-2024 10:09:11.797 +04:00  INF  Executing action method AsparagusN.Controllers.ErrorController.Error (API) - Validation state: "Valid"
04-03-2024 10:09:11.807 +04:00  INF  Executed action method AsparagusN.Controllers.ErrorController.Error (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.9147ms.
04-03-2024 10:09:11.815 +04:00  INF  Executing ObjectResult, writing value of type 'AsparagusN.Errors.ApiResponse'.
04-03-2024 10:09:11.966 +04:00  INF  Executed action AsparagusN.Controllers.ErrorController.Error (API) in 185.1301ms
04-03-2024 10:09:11.966 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.ErrorController.Error (API)'
04-03-2024 10:09:11.977 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 403 74 application/json;+charset=utf-8 629.2500ms
04-03-2024 10:09:15.819 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:09:15.839 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:09:15.844 +04:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:09:15.897 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:09:15.916 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 10:09:15.917 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 1.5005ms
04-03-2024 10:09:15.920 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:09:15.921 +04:00  ERR  Unable to resolve service for type 'AutoMapper.Mapper' while attempting to activate 'AsparagusN.Controllers.BasketController'.
04-03-2024 10:09:15.940 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - application/json 120.8824ms
04-03-2024 10:11:16.262 +04:00  INF  Request starting HTTP/1.1 GET http://localhost:5257/api/Basket - -
04-03-2024 10:11:16.265 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Birthday", "a"."ConcurrencyStamp", "a"."Email", "a"."EmailConfirmed", "a"."FullName", "a"."Gender", "a"."HomeAddressId", "a"."IsMealPlanMember", "a"."IsNormalUser", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LoyaltyPoints", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."PictureUrl", "a"."RegistrationDate", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UserName", "a"."WorkAddressId"
FROM "AspNetUsers" AS "a"
WHERE lower("a"."Email") = @__ToLower_0
LIMIT 1
04-03-2024 10:11:16.267 +04:00  INF  Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0
04-03-2024 10:11:16.269 +04:00  INF  Executing endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:11:16.270 +04:00  INF  Route matched with {action = "GetBasketForUser", controller = "Basket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[AsparagusN.DTOs.BasketDtos.CustomerBasketDto]] GetBasketForUser() on controller AsparagusN.Controllers.BasketController (API).
04-03-2024 10:11:16.270 +04:00  INF  Executed action AsparagusN.Controllers.BasketController.GetBasketForUser (API) in 0.3263ms
04-03-2024 10:11:16.270 +04:00  INF  Executed endpoint 'AsparagusN.Controllers.BasketController.GetBasketForUser (API)'
04-03-2024 10:11:16.270 +04:00  ERR  Unable to resolve service for type 'AutoMapper.Mapper' while attempting to activate 'AsparagusN.Controllers.BasketController'.
04-03-2024 10:11:16.271 +04:00  INF  Request finished HTTP/1.1 GET http://localhost:5257/api/Basket - - - 500 - application/json 9.8149ms
04-03-2024 10:11:26.722 +04:00  INF  Application is shutting down...
